# 应用构思

一个电影应用，应该具备哪些功能，哪些模块，网站的设计风格和基调是如何，技术栈如何选择，让我们开始来一步步构思。

## 主要功能模块

我们需要一个首页，作为网站的门户，内容展示应该充裕丰富，所以设计了以下模块：

### 🏠 首页模块

- **热门电影轮播图**
- **正在上映电影**
- **即将上映电影**
- **评分最高电影**
- **个性化推荐**

首页电影卡片展示，需要具备点击功能，点击后进入电影详情页，所以电影详情页设计如下：

### 📽️ 电影详情页

- **电影基本信息**（标题、简介、评分）
- **海报和剧照展示**
- **演员阵容**
- **预告片播放**
- **用户评分和评论**
- **相似电影推荐**

此外，我们需要一个强大的搜索功能，能够涵盖整个网站，所以搜索功能设计如下：

### 🔍 搜索功能

- **电影名称搜索**
- **演员搜索**
- **导演搜索**
- **高级筛选**（类型、年份、评分）

除了首页，还应该有一个电影列表页，采用流式布局，按照不同的检索条件展示，设计如下：

### 📋 电影列表页

- **按电影类型分类**
- **按年份分类**
- **按评分分类**
- **按地区分类**

最后，需要一些模块来增强网站的私域，所以设计了个人中心：

### 👤 个人中心

- **收藏电影**
- **观看历史**
- **评分记录**
- **个人推荐**

## 技术架构

### 🛠️ 技术栈

我们使用以下技术栈搭建：

- **Nuxt3**: 全栈框架，支持服务端渲染
- **TypeScript**: 类型安全的JavaScript超集
- **Tailwind CSS**: 原子化CSS框架
- **Pinia**: Vue 3状态管理库
- **TMDB API**: 电影数据接口

### 🚀 性能优化

为了优化用户体验，应该具备以下特性：

- **无限滚动加载**: 提升列表页面的浏览体验
- **懒加载图片**: 减少初始加载时间
- **骨架屏加载**: 提供更好的加载反馈
- **平滑过渡动画**: 增强页面交互体验
- **响应式设计**: 适配各种设备屏幕


### 服务端设计

虽然TMDB支持用户认证和收藏等功能，但这个前提是需要用户在TMDB官网注册账号，所以我们需要自建数据库+TMDB API结合起来。

1.用户系统: 自建数据库处理用户注册、登录

2.电影数据: 完全使用 TMDB API

3. 用户数据:

  - 观影记录存储在本地数据库
  - 收藏可以同步到 TMDB（可选）
  - 评分可以同步到 TMDB（可选）

服务器方面，打算自建 Nitro 服务器 + TMDB API 结合使用。简单请求直接代理到 TMDB API，复杂请求使用 Nitro 服务器处理。还可以考虑使用 Redis 来做数据缓存，包括错误处理和监控日志。

## 路由设计

```text
/                    -> 首页 (Home)
/movies             -> 电影列表页 (Movies List)
/movies/:id         -> 电影详情页 (Movie Detail)
/search             -> 搜索页面 (Search)
/discover           -> 发现页面 (Discover)
/genres/:id         -> 分类页面 (Genres)
/person/:id         -> 演员详情页 (Person Detail)
/user               -> 用户中心 (User Center)
/user/favorites     -> 我的收藏 (Favorites)
/user/watchlist     -> 观看列表 (Watchlist)
/user/history       -> 观看历史 (History)
```

## 页面设计

### 首页（Home）

```text
布局结构：
├── 导航栏 (Navbar)
├── 英雄区域 (Hero Section)
│   ├── 轮播图 (Featured Movie)
│   └── 快速操作按钮
├── 内容区域
│   ├── 正在上映 (Now Playing)
│   ├── 热门电影 (Popular Movies)
│   ├── 即将上映 (Upcoming)
│   └── 评分最高 (Top Rated)
└── 页脚 (Footer)
```

### 电影列表页（Movies List）

```text
布局结构：
├── 筛选栏 (Filter Bar)
│   ├── 排序选项
│   ├── 年份筛选
│   ├── 评分筛选
│   └── 类型筛选
├── 电影网格 (Movie Grid)
│   ├── 电影卡片
│   └── 分页控件
└── 侧边栏 (Sidebar)
    ├── 热门类型
    └── 推荐电影
```

### 电影详情页（Movie Detail）

```text
布局结构：
├── 电影头部 (Movie Header)
│   ├── 背景图片
│   ├── 电影海报
│   ├── 基本信息
│   └── 操作按钮
├── 内容标签页 (Tabs)
│   ├── 简介 (Overview)
│   ├── 演员 (Cast)
│   ├── 视频 (Videos)
│   ├── 图片 (Photos)
│   └── 评论 (Reviews)
└── 推荐区域
    ├── 相似电影
    └── 推荐电影
```

### 搜索页（Search）

```text
布局结构：
├── 搜索栏 (Search Bar)
├── 搜索过滤器
│   ├── 电影/电视剧/演员
│   ├── 年份范围
│   └── 评分范围
├── 搜索结果
│   ├── 电影结果
│   ├── 演员结果
│   └── 分页控件
└── 搜索历史
```

### 发现页（Discover）

```text
布局结构：
├── 筛选面板 (Filter Panel)
│   ├── 类型选择
│   ├── 年份选择
│   ├── 评分选择
│   ├── 语言选择
│   └── 排序选项
├── 电影展示区
│   ├── 网格视图
│   └── 列表视图
└── 结果统计
```

### 用户中心（User Center）

```text
布局结构：
├── 用户信息卡片
│   ├── 头像
│   ├── 用户名
│   └── 统计信息
├── 功能导航
│   ├── 我的收藏
│   ├── 观看列表
│   ├── 观看历史
│   └── 评分记录
└── 推荐内容
```

## 组件设计

```text
components/
├── common/
│   ├── Navbar.vue
│   ├── Footer.vue
│   ├── Loading.vue
│   ├── ErrorBoundary.vue
│   └── Pagination.vue
├── movie/
│   ├── MovieCard.vue
│   ├── MovieGrid.vue
│   ├── MovieHero.vue
│   ├── MovieInfo.vue
│   └── MovieTrailer.vue
├── search/
│   ├── SearchBar.vue
│   ├── SearchFilter.vue
│   └── SearchResults.vue
└── user/
    ├── UserCard.vue
    ├── FavoriteList.vue
    └── WatchHistory.vue
```

## 📋 中文接口速查表

### 🎬 电影相关接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 正在上映 | `/movie/now_playing` | GET | 获取当前正在上映的电影 |
| 热门电影 | `/movie/popular` | GET | 获取热门电影列表 |
| 评分最高 | `/movie/top_rated` | GET | 获取评分最高的电影 |
| 即将上映 | `/movie/upcoming` | GET | 获取即将上映的电影 |
| 电影详情 | `/movie/{id}` | GET | 获取电影详细信息 |
| 电影搜索 | `/search/movie` | GET | 搜索电影 |
| 电影推荐 | `/movie/{id}/recommendations` | GET | 获取相似电影推荐 |
| 电影图片 | `/movie/{id}/images` | GET | 获取电影海报和剧照 |
| 电影视频 | `/movie/{id}/videos` | GET | 获取电影预告片 |

### 📺 电视剧相关接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 正在播出 | `/tv/on_the_air` | GET | 获取正在播出的电视剧 |
| 热门剧集 | `/tv/popular` | GET | 获取热门电视剧 |
| 评分最高 | `/tv/top_rated` | GET | 获取评分最高的电视剧 |
| 今日播出 | `/tv/airing_today` | GET | 获取今日播出的电视剧 |
| 剧集详情 | `/tv/{id}` | GET | 获取电视剧详细信息 |
| 剧集搜索 | `/search/tv` | GET | 搜索电视剧 |

### 👥 演员相关接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 演员详情 | `/person/{id}` | GET | 获取演员详细信息 |
| 演员作品 | `/person/{id}/combined_credits` | GET | 获取演员的电影和电视剧作品 |
| 演员图片 | `/person/{id}/images` | GET | 获取演员照片 |
| 演员搜索 | `/search/person` | GET | 搜索演员 |

### 🔍 搜索和发现接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 多类型搜索 | `/search/multi` | GET | 同时搜索电影、电视剧、演员 |
| 电影发现 | `/discover/movie` | GET | 按条件筛选发现电影 |
| 电视剧发现 | `/discover/tv` | GET | 按条件筛选发现电视剧 |

### 📝 用户相关接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 用户评分 | `/account/{account_id}/rated/movies` | GET | 获取用户评分的电影 |
| 用户收藏 | `/account/{account_id}/favorite/movies` | GET | 获取用户收藏的电影 |
| 观看列表 | `/account/{account_id}/watchlist/movies` | GET | 获取用户观看列表 |

### 🌍 配置信息接口

| 功能 | 接口路径 | 方法 | 说明 |
|------|----------|------|------|
| 电影类型 | `/genre/movie/list` | GET | 获取电影类型列表 |
| 电视剧类型 | `/genre/tv/list` | GET | 获取电视剧类型列表 |
| 国家列表 | `/configuration/countries` | GET | 获取支持的国家列表 |
| 语言列表 | `/configuration/languages` | GET | 获取支持的语言列表 |

### 📊 常用参数

| 参数名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `api_key` | string | API密钥（必需） | `your_api_key` |
| `language` | string | 语言代码 | `zh-CN` |
| `page` | integer | 页码 | `1` |
| `query` | string | 搜索关键词 | `复仇者联盟` |
| `year` | integer | 年份筛选 | `2023` |
| `with_genres` | string | 类型筛选 | `28,12` |
| `sort_by` | string | 排序方式 | `popularity.desc` |