# 云服务

我需要一个免费的服务器和域名，网上搜索了一下，总结出来以下几个方案：

## 云服务器

### Oracle Cloud

注册即送$300点，30天到期后可以转换到 Always Free 服务，即永久免费。

- 2个 AMD VM或者 4 个 ARM VM
- 200G存储
- 10T/月 流量

地址：https://www.oracle.com/cloud/free/

实用型很强，完全满足我们跑jenkins的需求。推荐。

经过测试，注册需要国际信用卡，暂时没有。

### AWS 免费套餐 (12个月)

- EC2 t2.micro (1核 1GB)
- 750 小时/月（基本全天运行）
- 30GB 存储

地址：https://aws.amazon.com/free/

只有12个月的免费套餐，到期后需要收费，不太推荐。

经过测试，需要验证严格的个人信息，有虚拟卡也不够用，还要美国手机号的验证码。


### Google Cloud Platform

- $300 免费额度
- 90 天试用

地址：https://cloud.google.com/free

谷歌云免费的产品全部需要支付认证，并且无法使用虚拟卡，国内的万事卡和visa卡认证会失败。暂时放弃谷歌云。

### 总结

缺少服务器，暂时没法部署自己的服务。

#### 2025/12/11 更新

介于以上种种问题，所以自己买个阿里云的服务器，然后自己部署。

自动化部署脚本步骤和方案：

1. 服务器初始化脚本 - 安装 Docker、Jenkins、Nginx
2. Jenkins 配置脚本 - Pipeline、构建任务
3. 自动备份脚本 - 定期备份构建产物

## 免费域名

有自己的服务器后，还有一个问题没有解决，那就是需要一个域名进行访问。

### Freenom

- 免费顶级域名：.tk, .ml, .ga, .cf, .gq
- 可免费使用 12 个月（可续期）
- 示例：myjenkins.tk

地址：https://www.freenom.com

### 子域名服务

DuckDNS 

地址：https://www.duckdns.org

No-IP

地址：https://www.noip.com

### Cloud Provider 提供的免费域名

Vercel/Netlify为代表的云服务器商

### 便宜的域名对比

| 域名商 | .com 首年 | .xyz 首年 | 特点 |
|--------|-----------|-----------|------|
| Namecheap | ~$9 | ~$1 | 性价比高，送隐私保护 |
| Cloudflare | ~$9 | ~$1 | 最便宜，按成本价 |
| Porkbun | ~$9 | ~$1 | 简单易用 |
| 阿里云 | ¥55 | ¥8 | 国内快，需备案 |
| 腾讯云 | ¥45 | ¥8 | 新人优惠 |

## 总结

经过上面的数据，总结出几套组合方案

### 方案A

因为我之前使用过Vercel的免费域名，所以这次优先考虑vercel的免费域名。

但因为Vercel没有传统意义上的免费服务器，更偏向于静态网站部署，不能跑Jenkins这种长期运行的服务。

折中方案是Vercel + Oracle Cloud组合

```bash
# 架构
┌─────────────────┐
│  Vercel (前端)   │  ← 用户访问
│  yourapp.vercel.app │
└────────┬────────┘
         │ API 调用
         ↓
┌─────────────────┐
│ Oracle Cloud    │  ← Jenkins + 后端服务
│ (免费服务器)     │
│ api.yourdomain.com │
└─────────────────┘
```

### 方案B

```bash
服务器: Oracle Cloud (免费)
域名: DuckDNS (免费)
SSL: Let's Encrypt (免费)
CDN: Cloudflare (免费)
```

最终访问地址: https://myjenkins.duckdns.org

### 方案C

```bash
服务器: Oracle Cloud (免费)
域名: Cloudflare 购买 .xyz ($1/年)
DNS: Cloudflare (免费)
SSL: Cloudflare SSL (免费)
CDN: Cloudflare CDN (免费)
```

最终访问地址: https://jenkins.yourname.xyz

### 最终方案D

由于国外的服务器没法购买，就买了阿里云的服务器顺带域名。

之前的h5托管在Vercel，博客在Github page上，所以开始逐步转移。

目前正在忙实名认证还是备案的事情，估计需要半个月多吧。

## 服务器部署工作

备案一周搞定了，接下来就开始部署我们的服务器。

### 服务器和域名

我们需要登录阿里云控制台，搜索“云解析DNS”，找到我们的域名并点击“解析设置”，将记录值改完我们购买的ECS服务器的公网IP地址。

此时我们的网站“hongyingxin.com”还是无法访问，因为我们的服务器还没有配置好。

通过“Workbench”连接上服务器，因为提供了“AI Agent”助手，对新手比较友善，我们可以通过对话就完成软件的安装。

### 安装nginx

nginx是一个轻量级的Web服务器，我们通过“AI Agent”助手安装nginx，并配置好我们的网站。

首先检查系统是否已经安装了nginx，如果没有安装，则安装nginx。

>备注：系统是Alibaba Cloud Linux，dnf是系用的包管理器，宝塔是可视化图形管理界面

```bash
# 检查系统是否已经安装了nginx
sudo dnf list installed nginx
# 检查系统是否已经安装了nginx的包
sudo dnf list nginx
# 安装
sudo dnf -y install nginx
# 启动nginx服务并设置为开机自启
sudo systemctl start nginx
sudo systemctl enable nginx

# 常用的一些命令
# 重启nginx服务
sudo systemctl restart nginx
# 停止nginx服务
sudo systemctl stop nginx
# 查看nginx服务状态
sudo systemctl status nginx
# 查看nginx服务日志
sudo systemctl logs nginx
# 查看nginx服务配置
sudo systemctl config nginx
```

此时就可以正常访问到我们的网站了。

然后通过命令`which nginx`找到nginx的安装目录。Nginx的可执行文件位于`/usr/sbin/nginx`。这是Nginx的主程序路径。Nginx的配置文件会位于 `/etc/nginx/nginx.conf`。

通过`cat /etc/nginx/nginx.conf`查看nginx的配置文件。

### 初始化页面

接下来我们在ECS服务器根目录创建一个`web`目录，并在这个目录下创建一个`index.html`文件，内容为：

```html
<html>
  <head>
    <title>Welcome to nginx!</title>
  </head>
    <body>
    <h1>Welcome to nginx!</h1>
  </body>
</html>
```

然后修改nginx的配置文件，将网站的根目录指向`/web`，并设置默认文件为`index.html`。

修改内容如下：

1. 默认根目录更改:

  - 原始配置: root /usr/share/nginx/html;
  - 修改后: root /web;

2. 注释部分的根目录也同步更新:

  - 原始配置: # root /usr/share/nginx/html;
  - 修改后: # root /web;

  ### 宝塔

  宝塔面板是一款非常流行的服务器管理工具，可以提供可视化图形管理界面，方便我们管理服务器。

  安装完成后，会显示“面板地址”、“username(帐号)”、“password(密码)”，我们可以使用这些信息登录宝塔面板。

  因为宝塔默认使用8888端口，阿里云的防火墙（安全组）默认是关闭的，所以需要手动开启。

  步骤如下：

  - 阿里云ECS控制台
  - 点击左侧“安全组” -> 点击列表里的安全组ID -> “手动添加”
  - 添加规则，类型为“HTTP”，源地址为“0.0.0.0/0”，端口范围为“8888”