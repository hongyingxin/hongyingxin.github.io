# Vue路由权限

权限管理是后台管理系统最常见的功能，当用户登录之后动态展示Menu菜单栏。

权限由前端 or 后端来控制？一般情况下，前端实现是根据用户登录后获取role和本地页面的权限作比较，生成用户可访问的路由表；另一种情况是后端根据用户的权限返回可访问的菜单，前端本地路由与后端返回菜单做关联。我司因为有菜单配置和控件权限的业务需求，所以采用了第二张实现方式。

## 页面权限

1. 前端会有一份基础路由表和异步路由表，vue-router挂载基础路由表；
2. 当用户登录后通过token获取用户可访问菜单，与异步路由表进行匹配（三级菜单根据自定义字段进行判断）
3. 调用router.addRoutes动态挂载路由并保存到vuex
4. 调用router.beforeEach注册全局前置守卫，对路由进行登录拦截

## 按钮权限

关于需要按钮级别控制的地方不是很多，通过获取到用户的role之后进行判断。为了减少代码的重复，可以将它封装成一个指令。

## 参考文档：
https://juejin.cn/post/6844903478880370701#heading-3

https://juejin.cn/post/6844903648057622536#heading-9

https://juejin.cn/post/6875597201960075277