# 变量提升

## 变量提升

变量提升（Hoisting）是 JavaScript 中的一种行为，它允许在声明之前使用变量。

在 JavaScript 中，变量提升分为两种情况：

- 函数声明提升：函数声明会被提升到作用域的顶部，可以在声明之前调用。
- 变量提升：变量会被提升到作用域的顶部，但不会初始化，可以在声明之前使用。

## 本质

- 代码真正执行前，JS 引擎会先进行“创建阶段”，把作用域内的“绑定”登记到环境记录中，这个过程被称为“提升”。

- “提升”并不是把代码移动到顶部，而是“提前建立名字绑定并完成初始化”。

## 环境记录

- var 变量声明和 function 函数声明  存放在变量环境 VarEnv

- let、const、class、块级作用域绑定 存放在词法环境 LexEnv

## 不同行为

- function 声明：整体提升（名字+函数体），可在声明前调用

```js
foo() // 正常执行
function foo(){}
```

- var 声明：只提升“声明”（绑定建立）。初始化留在原处，初始化为 undefined。

```js
console.log(foo) // undefined
var foo = 1
```

- let、const 声明：在创建阶段登记“绑定”，但在初始化前处于“暂时性死区”（TDZ），访问会报错 ReferenceError。

```js
console.log(foo) // ReferenceError: foo is not defined
let foo = 1
```