# 数据类型

## 前言

>请讲下 JavaScript 中的数据类型？

在前端面试中，估计大家都被这么问过。

答：JavaScript 中的数据类型包括原始类型和引用类型。其中原始类型包括 Number、String、Boolean、Null、Undefined、Symbol、BigInt 共 7 种，引用类型包括 Object 共 1 种。

一般都是这么回答的，只是这通常第一个问题，由这个问题可以引出很多很多的问题。比如：

- Null 和 Undefined 有什么区别？前端的判空有哪些需要注意的？
- typeof null 为什么是 object？
- 为什么 ES6 要提出 Symbol？
- BigInt 解决了什么问题？
- 为什么 0.1 + 0.2 !== 0.3？你如何解决这个问题？
- 如何判断一个值是数组？

## 弱类型语言

因为 JavaScript 是弱类型语言或者说是动态语言。这意味着不需要提前声明变量的类型，在程序运行的过程中，类型会被自动确定，也就是说可以使用同一个变量保存不同类型的值。

```js
var foo = 42 // foo is a Number now
foo = 'bar' // foo is a String now
foo = true // foo is a Boolean now
```

这种特性给我们带来便利的同时，也给我们带来了很多的类型错误。

对 JavaScript 的数据类型掌握，是一个前端最基本的知识点。

## null 还是 undefined

### 定义

undefined 表示未定义的变量。 null 值表示一个空对象指针。

> 一开始的时候，JavaScript 设计者 Brendan Eich 其实只是定义了 null， null像在 Java 里一样，被当成一个对象。但是因为 JavaScript 中有两种数据类型：原始数据类型和引用数据类型。Brendan Eich 觉得表示“无”的值最好不是对象。

所以 JavaScript 的设计是 null 是一个表示“无”的对象，转为数值时为0；undefined 是一个表示“无”的原始值，转为数值时为 NaN。

```js
Number(null) // 0

5 + null // 5

Number(undefined) // NaN

5 + undefined // NaN
```

### Null 和 Undefined 的区别和应用

null 表示“没有对象”，即该处不应该有值。典型的用法如下：

- 1.作用函数的参数，表示该函数的参数不是对象
- 2.作为对象原型链的终点

```js
Object.getPrototypeOf(Object.prototype)
```

undefined 表示“缺少值”，就是此处应该有一个值，但是还没有定义。典型用法：

- 1.变量被声明，但没有赋值时，就等于 undefined
- 2.调用函数时，应该提供的参数没有提供，该参数等于 undefined
- 3.对象没有赋值的属性，该属性的值为 undefined
- 4.函数没有返回值时，默认返回 undefined

```js
var i;
i // undefined

function f(x) {
  console.log(x)
}
f() // undefined

var o = new Object()
o.p // undefined

var x = f()
x // undefined
```

### 判空应该注意什么？

JavaScript 五种空值和假值，分别为 null、undefined、NaN、''、0、false。

这有时候很容易导致一些问题，比如

```js
let a = 0
console.log(a || '/')
// 本意是只要 a 为 null 或者 Undefined 的时候，输出 '/'，但实际上只要是我们以上的五种之一就输出 '/'
```
当然我们可以写成这样：

```js
let a = 0
if (a === null || a == undefined) {
  console.log('/')
} else {
  console.log(a)
}
```
虽然解决了问题，但不太优雅。于是ES规范提出了空值合并操作符（??），用于解决这个问题。

> 空值合并操作符（??）是一个逻辑操作符，当左侧的操作数为 null 或 undefined 时，返回其右侧操作数，否则返回左侧操作数。

```js
let a = 0
console.log(a ?? '/')
// 输出: 0
```